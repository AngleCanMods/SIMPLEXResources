//	================================== seeing the coding among the stars
//	*** ANGLECAN SIMPLEX Resources ***
//	================================== by theJesuit
//	                    Fuel Rebalance
//
//	*** VERSION 1.11.20211227
//	*** Licence CC-BY-NC-SA (http://creativecommons.org/licenses/by-nc-sa/4.0/)
//		This License extends to textures created by theJesuit found in Gamedata/AngleCanMods/SimplexResources/Assets
//		ACStationTanks.dds based on original KD-StationTanks.dds created by @Eleusis La Arwall available at https://spacedock.info/mod/308/ and made available by same license CC-BY-SA 4.0 International

@PART[cryoengine*]:HAS[@MODULE[ModuleEngines*]:HAS[@PROPELLANT[LqdHydrogen]]]:NEEDS[CryoEngines]
	{	@MODULE[ModuleEngines*]
			{ 	!atmosphereCurve {}
				@PROPELLANT[LqdHydrogen]
					{	@name = LiquidFuel
						@ratio = 0.5
					}
				@PROPELLANT[Oxidizer]
					{	@ratio = 1.5
					}
			}
	}
@PART[cryoengine-stromboli-1]:FOR[CryoEngines] 
	{	 @title = CHR-06-10A 'Stromboli' LiquidFuel Engine
		@MODULE[ModuleEnginesFX]
			{	atmosphereCurve
					{	key = 0 300
						key = 1 255
						key = 4 200
					}
			}
	}
@PART[cryoengine-vesuvius-1]:FOR[CryoEngines]
	{	@title = CHR-12-2 'Vesuvius' LiquidFuel Engine
		@MODULE[ModuleEnginesFX]
			{	atmosphereCurve
					{	key = 0 355
						key = 1 305
						key = 4 200
					}
			}
	}
@PART[cryoengine-hecate-1]:FOR[CryoEngines] 
	{	@title = CHE-12-10 'Hecate' LiquidFuel Engine
		@MODULE[ModuleEnginesFX]
			{	atmosphereCurve
					{	key = 0 395
						key = 1 60
						key = 4 0.001
					}

			}
	}
@PART[cryoengine-erebus-1]:FOR[CryoEngines]
	{	@title = CHR-18-0120 'Erebus' LiquidFuel Engine
		@MODULE[ModuleEnginesFX]
			{	atmosphereCurve
					{	key = 0 340
						key = 1 300
						key = 4 200
					}
			}
	}
@PART[cryoengine-pavonis-1]:FOR[CryoEngines]
	{	@title = CHE-18-60 'Pavonis' LiquidFuel Engine
		@MODULE[ModuleEnginesFX]
			{	atmosphereCurve
					{	key = 0 398
						key = 1 70
						key = 4 0.001
					}
			}
	}
@PART[cryoengine-fuji-1]:FOR[CryoEngines]
	{	@title = CHR-25-9B 'Fuji' LiquidFuel Engine
		@MODULE[ModuleEnginesFX]
			{	atmosphereCurve
					{	key = 0 348
						key = 1 298
						key = 4 200
					}
			}
	}
@PART[cryoengine-ulysses-1]:FOR[CryoEngines]
	{	@title = CHE-25-2X 'Ulysses' LiquidFuel Engine
		@MODULE[ModuleEnginesFX]
			{	atmosphereCurve
					{	key = 0 388
						key = 1 220
						key = 4 0.001
					}
			
			}
	}
@PART[cryoengine-etna-1]:FOR[CryoEngines]
	{	@title = CHR-37-68 'Etna' LiquidFuel Engine
		@MODULE[ModuleEnginesFX]
			{	atmosphereCurve
					{	key = 0 340
						key = 1 295
						key = 4 200
					}
			}
	}
@PART[cryoengine-tharsis-1]:FOR[CryoEngines] 
	{	@title = CHE-37-60 'Tharsis' LiquidFuel Engine Cluster
		@MODULE[ModuleEnginesFX]
			{	atmosphereCurve
					{	key = 0 398
						key = 1 70
						key = 4 0.001
					}
			}
	}

//	Methalox Fuel Patch
@PART[cryoengine*]:HAS[@MODULE[ModuleEngines*]:HAS[@PROPELLANT[LqdMethane]]]:NEEDS[CryoEngines]
	{	@MODULE[ModuleEngines*]
			{ 	@PROPELLANT[LqdMethane]
					{	@name = CryoFuel
					}
			}
	}

@PART[cryoengine-compsognathus-1]:FOR[CryoEngines]	{	@title = #simplexresources_cryoengine_cmr061			}
@PART[cryoengine-hawk-1]:FOR[CryoEngines]			{	@title = #simplexresources_cryoengine_hawk				}
@PART[cryoengine-deinonychus-1]:FOR[CryoEngines]	{	@title = #simplexresources_cryoengine_deinonychus			}
@PART[cryoengine-buzzard-1]:FOR[CryoEngines]		{	@title = #simplexresources_cryoengine_buzzard				}
@PART[cryoengine-iguanodon-1]:FOR[CryoEngines]		{	@title = #simplexresources_cryoengine_iguanodon				}
@PART[cryoengine-harrier-1]:FOR[CryoEngines]		{	@title = #simplexresources_cryoengine_harrier				}
@PART[cryoengine-allosaur-1]:FOR[CryoEngines]		{	@title = #simplexresources_cryoengine_allosaur				}
@PART[cryoengine-eagle-1]:FOR[CryoEngines]			{	@title = #simplexresources_cryoengine_eagle					}
@PART[cryoengine-tyrannosaur-1]:FOR[CryoEngines]	{	@title = #simplexresources_cryoengine_tyrannosaur	}
@PART[cryoengine-vulture-1]:FOR[CryoEngines]		{	@title = #simplexresources_cryoengine_vulture				}


// Kerbal Atomics LF Patch

@PART[ntr-*]:HAS[@MODULE[ModuleEngines*]]:NEEDS[KerbalAtomics]
	{	@MODULE[ModuleEngines*]:HAS[!PROPELLANT[Oxidizer]]
			{ 	!atmosphereCurve {}
				@PROPELLANT[LqdHydrogen]
					{	@name = LiquidFuel
						@ratio = 1.0
					}
			}
		@MODULE[ModuleEngines*]:HAS[@PROPELLANT[Oxidizer]]
			{ 	!atmosphereCurve {}
				@PROPELLANT[LqdHydrogen]
					{	@name = LiquidFuel
						@ratio = 0.5
					}
				@PROPELLANT[Oxidizer]
					{	@ratio = 1.5
					}
			}
	}
@PART[ntr-gc-25-2]:NEEDS[KerbalAtomics]
	{	@title = #simplexresources_kerbalatomics_emancipator
		@mass = 30
		@MODULE[ModuleEnginesFX,0]
			{	atmosphereCurve
					{	key = 0 1325
						key = 1 520
						key = 4 180
					}
			}
		@MODULE[ModuleEnginesFX,1] 
			{	atmosphereCurve
					{	key = 0 1325
						key = 1 520
						key = 4 180
					}
			}
	}
@PART[ntr-gc-25-3]:NEEDS[KerbalAtomics]
	{	@title = #simplexresources_kerbalatomics_deliverance
		@mass = 24
		@MODULE[ModuleEnginesFX,0]
			{	atmosphereCurve
					{	key = 0 1025
						key = 1 920
						key = 4 880
					}
			}
	}
@PART[ntr-gc-25-1]:NEEDS[KerbalAtomics]
	{	@title = #simplexresources_kerbalatomics_liberator
		@mass = 22
			{	atmosphereCurve
					{	key = 0 1425
						key = 1 560
						key = 4 180
					}
			}
	}
@PART[ntr-sc-25-1]:NEEDS[KerbalAtomics]
	{	@title = #simplexresources_kerbalatomics_poseidon
		@mass = 14
		@MODULE[ModuleEnginesFX]:HAS[!PROPELLANT[Oxidizer]] 
			{	atmosphereCurve
					{	key = 0 830
						key = 1 400
						key = 2 50
						key = 10 1
					}
			}
		@MODULE[ModuleEnginesFX]:HAS[@PROPELLANT[Oxidizer]] 
			{	atmosphereCurve
					{	key = 0 505
						key = 1 150
						key = 4 70
					}
			}
	}
@PART[ntr-sc-125-1]:NEEDS[KerbalAtomics]
	{	@title = #simplexresources_kerbalatomics_neptune
		@mass = 3.35
		@MODULE[ModuleEnginesFX]:HAS[!PROPELLANT[Oxidizer]] 
			{	atmosphereCurve
					{	key = 0 825
						key = 1 400
						key = 2 50
						key = 10 1
					}
			}
		@MODULE[ModuleEnginesFX]:HAS[@PROPELLANT[Oxidizer]]
			{	atmosphereCurve
					{	key = 0 500
						key = 1 145
						key = 4 70
					}
		}
	}
@PART[ntr-sc-125-2]:NEEDS[KerbalAtomics]
	{	@title = #simplexresources_kerbalatomics_stubber
		@mass = 2.5
		@MODULE[ModuleEnginesFX]:HAS[!PROPELLANT[Oxidizer]]
			{	atmosphereCurve
					{	key = 0 815
						key = 1 400
						key = 2 340
						key = 10 1
					}
			}
		@MODULE[ModuleEnginesFX]:HAS[@PROPELLANT[Oxidizer]]
			{	atmosphereCurve
					{	key = 0 490
						key = 1 290
						key = 4 70
					}
			}
	}
@PART[ntr-sc-0625-1]:NEEDS[KerbalAtomics]
	{	@title = #simplexresources_kerbalatomics_eel
		@mass *= 1.7
		@MODULE[ModuleEnginesFX]
			{	atmosphereCurve
					{	key = 0 800
						key = 1 400
						key = 2 50
						key = 10 1
					}
			}
	}
@PART[ntr-sc-375-1]:NEEDS[KerbalAtomics]
	{	@title = #simplexresources_kerbalatomics_scylla
		@mass = 32
		@MODULE[ModuleEnginesFX]:HAS[!PROPELLANT[Oxidizer]]
			{	atmosphereCurve
					{	key = 0 750
						key = 1 700
						key = 4 500
					}
			}
		@MODULE[ModuleEnginesFX]:HAS[@PROPELLANT[Oxidizer]]
			{	atmosphereCurve
					{	key = 0 450
						key = 1 425
						key = 4 400
					}
			}
	}

// KerbalAtomics: LV-N fix after KerbalAtomics patch, to remove LH2 version (-> LF)
@PART[nuclearEngine]:NEEDS[!NTRsUseLF&KerbalAtomics]:AFTER[zKerbalAtomics]
{
	!MODULE[MultiModeEngine] {}
	!MODULE[ModuleEngines*]:HAS[#engineID[LH2]] {}
	@MODULE[ModuleAlternator] 
	{
		!preferMultiMode = _
	}
}